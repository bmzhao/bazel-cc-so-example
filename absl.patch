diff --git a/absl/algorithm/BUILD.bazel b/absl/algorithm/BUILD.bazel
index c506f3b..8a8f4f1 100644
--- a/absl/algorithm/BUILD.bazel
+++ b/absl/algorithm/BUILD.bazel
@@ -29,6 +29,7 @@ cc_library(
     name = "algorithm",
     hdrs = ["algorithm.h"],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
 )
 
@@ -63,6 +64,7 @@ cc_library(
         "container.h",
     ],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         ":algorithm",
diff --git a/absl/base/BUILD.bazel b/absl/base/BUILD.bazel
index 5b7b295..c7b6dfe 100644
--- a/absl/base/BUILD.bazel
+++ b/absl/base/BUILD.bazel
@@ -41,6 +41,7 @@ cc_library(
         "internal/spinlock_wait.h",
     ],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     visibility = [
         "//absl/base:__pkg__",
@@ -55,6 +56,7 @@ cc_library(
         "policy_checks.h",
     ],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
 )
 
@@ -64,6 +66,7 @@ cc_library(
     hdrs = ["dynamic_annotations.h"],
     copts = ABSL_DEFAULT_COPTS,
     defines = ["__CLANG_SUPPORT_DYN_ANNOTATION__"],
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
 )
 
@@ -81,6 +84,7 @@ cc_library(
         "thread_annotations.h",
     ],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         ":config",
@@ -97,6 +101,7 @@ cc_library(
         "internal/low_level_alloc.h",
     ],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = select({
         "//absl:windows": [],
         "//conditions:default": ["-pthread"],
@@ -123,6 +128,7 @@ cc_library(
         "internal/scheduling_mode.h",
     ],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     visibility = [
         "//absl:__subpackages__",
@@ -156,6 +162,7 @@ cc_library(
         "log_severity.h",
     ],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = select({
         "//absl:windows": [],
         "//conditions:default": ["-pthread"],
@@ -203,6 +210,7 @@ cc_library(
     srcs = ["internal/throw_delegate.cc"],
     hdrs = ["internal/throw_delegate.h"],
     copts = ABSL_DEFAULT_COPTS + ABSL_EXCEPTIONS_FLAG,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_EXCEPTIONS_FLAG_LINKOPTS + ABSL_DEFAULT_LINKOPTS,
     visibility = [
         "//absl:__subpackages__",
@@ -229,6 +237,7 @@ cc_library(
     testonly = 1,
     hdrs = ["internal/exception_testing.h"],
     copts = ABSL_TEST_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     visibility = [
         "//absl:__subpackages__",
@@ -242,6 +251,7 @@ cc_library(
 cc_library(
     name = "pretty_function",
     hdrs = ["internal/pretty_function.h"],
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     visibility = ["//absl:__subpackages__"],
 )
@@ -252,6 +262,7 @@ cc_library(
     srcs = ["internal/exception_safety_testing.cc"],
     hdrs = ["internal/exception_safety_testing.h"],
     copts = ABSL_TEST_COPTS + ABSL_EXCEPTIONS_FLAG,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_EXCEPTIONS_FLAG_LINKOPTS + ABSL_DEFAULT_LINKOPTS,
     deps = [
         ":config",
@@ -314,6 +325,7 @@ cc_library(
     testonly = 1,
     srcs = ["spinlock_test_common.cc"],
     copts = ABSL_TEST_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         ":base",
@@ -345,6 +357,7 @@ cc_library(
     testonly = 1,
     srcs = ["internal/spinlock_benchmark.cc"],
     copts = ABSL_TEST_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     visibility = [
         "//absl/base:__pkg__",
@@ -376,6 +389,7 @@ cc_library(
         "internal/unaligned_access.h",
     ],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         ":config",
@@ -485,6 +499,7 @@ cc_test(
 cc_library(
     name = "bits",
     hdrs = ["internal/bits.h"],
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     visibility = [
         "//absl:__subpackages__",
@@ -509,6 +524,7 @@ cc_library(
     testonly = 1,
     srcs = ["internal/scoped_set_env.cc"],
     hdrs = ["internal/scoped_set_env.h"],
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     visibility = [
         "//absl:__subpackages__",
diff --git a/absl/container/BUILD.bazel b/absl/container/BUILD.bazel
index 998294c..f53f9b9 100644
--- a/absl/container/BUILD.bazel
+++ b/absl/container/BUILD.bazel
@@ -31,6 +31,7 @@ cc_library(
     name = "compressed_tuple",
     hdrs = ["internal/compressed_tuple.h"],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         "//absl/utility",
@@ -54,6 +55,7 @@ cc_library(
     name = "fixed_array",
     hdrs = ["fixed_array.h"],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         ":compressed_tuple",
@@ -121,6 +123,7 @@ cc_library(
     name = "inlined_vector_internal",
     hdrs = ["internal/inlined_vector.h"],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         ":compressed_tuple",
@@ -134,6 +137,7 @@ cc_library(
     name = "inlined_vector",
     hdrs = ["inlined_vector.h"],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         ":inlined_vector_internal",
@@ -149,6 +153,7 @@ cc_library(
     testonly = 1,
     hdrs = ["internal/counting_allocator.h"],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     visibility = ["//visibility:private"],
 )
@@ -223,6 +228,7 @@ cc_library(
     srcs = ["internal/test_instance_tracker.cc"],
     hdrs = ["internal/test_instance_tracker.h"],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     visibility = [
         "//absl:__subpackages__",
@@ -259,6 +265,7 @@ cc_library(
     name = "flat_hash_map",
     hdrs = ["flat_hash_map.h"],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         ":container_memory",
@@ -291,6 +298,7 @@ cc_library(
     name = "flat_hash_set",
     hdrs = ["flat_hash_set.h"],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         ":container_memory",
@@ -325,6 +333,7 @@ cc_library(
     name = "node_hash_map",
     hdrs = ["node_hash_map.h"],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         ":container_memory",
@@ -358,6 +367,7 @@ cc_library(
     name = "node_hash_set",
     hdrs = ["node_hash_set.h"],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         ":hash_function_defaults",
@@ -388,6 +398,7 @@ cc_library(
     name = "container_memory",
     hdrs = ["internal/container_memory.h"],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         "//absl/memory",
@@ -412,6 +423,7 @@ cc_library(
     name = "hash_function_defaults",
     hdrs = ["internal/hash_function_defaults.h"],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         "//absl/base:config",
@@ -440,6 +452,7 @@ cc_library(
     srcs = ["internal/hash_generator_testing.cc"],
     hdrs = ["internal/hash_generator_testing.h"],
     copts = ABSL_TEST_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         ":hash_policy_testing",
@@ -453,6 +466,7 @@ cc_library(
     testonly = 1,
     hdrs = ["internal/hash_policy_testing.h"],
     copts = ABSL_TEST_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         "//absl/hash",
@@ -475,6 +489,7 @@ cc_library(
     name = "hash_policy_traits",
     hdrs = ["internal/hash_policy_traits.h"],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = ["//absl/meta:type_traits"],
 )
@@ -494,6 +509,7 @@ cc_library(
     name = "hashtable_debug",
     hdrs = ["internal/hashtable_debug.h"],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         ":hashtable_debug_hooks",
@@ -504,6 +520,7 @@ cc_library(
     name = "hashtable_debug_hooks",
     hdrs = ["internal/hashtable_debug_hooks.h"],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
 )
 
@@ -515,6 +532,7 @@ cc_library(
     ],
     hdrs = ["internal/hashtablez_sampler.h"],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         ":have_sse",
@@ -546,6 +564,7 @@ cc_library(
     name = "node_hash_policy",
     hdrs = ["internal/node_hash_policy.h"],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
 )
 
@@ -565,6 +584,7 @@ cc_library(
     name = "raw_hash_map",
     hdrs = ["internal/raw_hash_map.h"],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         ":container_memory",
@@ -576,6 +596,7 @@ cc_library(
     name = "have_sse",
     hdrs = ["internal/have_sse.h"],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     visibility = ["//visibility:private"],
 )
@@ -584,6 +605,7 @@ cc_library(
     name = "common",
     hdrs = ["internal/common.h"],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         "//absl/meta:type_traits",
@@ -596,6 +618,7 @@ cc_library(
     srcs = ["internal/raw_hash_set.cc"],
     hdrs = ["internal/raw_hash_set.h"],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         ":common",
@@ -653,6 +676,7 @@ cc_library(
     name = "layout",
     hdrs = ["internal/layout.h"],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         "//absl/base:core_headers",
@@ -685,6 +709,7 @@ cc_library(
     testonly = 1,
     hdrs = ["internal/tracked.h"],
     copts = ABSL_TEST_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
 )
 
@@ -693,6 +718,7 @@ cc_library(
     testonly = 1,
     hdrs = ["internal/unordered_map_constructor_test.h"],
     copts = ABSL_TEST_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         ":hash_generator_testing",
@@ -706,6 +732,7 @@ cc_library(
     testonly = 1,
     hdrs = ["internal/unordered_map_lookup_test.h"],
     copts = ABSL_TEST_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         ":hash_generator_testing",
@@ -719,6 +746,7 @@ cc_library(
     testonly = 1,
     hdrs = ["internal/unordered_map_modifiers_test.h"],
     copts = ABSL_TEST_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         ":hash_generator_testing",
@@ -732,6 +760,7 @@ cc_library(
     testonly = 1,
     hdrs = ["internal/unordered_set_constructor_test.h"],
     copts = ABSL_TEST_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         ":hash_generator_testing",
@@ -746,6 +775,7 @@ cc_library(
     testonly = 1,
     hdrs = ["internal/unordered_set_members_test.h"],
     copts = ABSL_TEST_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         "//absl/meta:type_traits",
@@ -758,6 +788,7 @@ cc_library(
     testonly = 1,
     hdrs = ["internal/unordered_map_members_test.h"],
     copts = ABSL_TEST_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         "//absl/meta:type_traits",
@@ -770,6 +801,7 @@ cc_library(
     testonly = 1,
     hdrs = ["internal/unordered_set_lookup_test.h"],
     copts = ABSL_TEST_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         ":hash_generator_testing",
@@ -783,6 +815,7 @@ cc_library(
     testonly = 1,
     hdrs = ["internal/unordered_set_modifiers_test.h"],
     copts = ABSL_TEST_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         ":hash_generator_testing",
diff --git a/absl/debugging/BUILD.bazel b/absl/debugging/BUILD.bazel
index 913cfaf..d38eda7 100644
--- a/absl/debugging/BUILD.bazel
+++ b/absl/debugging/BUILD.bazel
@@ -34,6 +34,7 @@ cc_library(
     ],
     hdrs = ["stacktrace.h"],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         ":debugging_internal",
@@ -55,6 +56,7 @@ cc_library(
         "symbolize.h",
     ],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         ":debugging_internal",
@@ -90,6 +92,7 @@ cc_library(
         "internal/examine_stack.h",
     ],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     visibility = ["//visibility:private"],
     deps = [
@@ -105,6 +108,7 @@ cc_library(
     srcs = ["failure_signal_handler.cc"],
     hdrs = ["failure_signal_handler.h"],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         ":examine_stack",
@@ -154,6 +158,7 @@ cc_library(
         "internal/vdso_support.h",
     ],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         "//absl/base",
@@ -167,6 +172,7 @@ cc_library(
     srcs = ["internal/demangle.cc"],
     hdrs = ["internal/demangle.h"],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     deps = [
         "//absl/base",
         "//absl/base:core_headers",
@@ -192,6 +198,7 @@ cc_library(
     name = "leak_check",
     srcs = ["leak_check.cc"],
     hdrs = ["leak_check.h"],
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = ["//absl/base:core_headers"],
 )
@@ -202,6 +209,7 @@ cc_library(
 cc_library(
     name = "leak_check_disable",
     srcs = ["leak_check_disable.cc"],
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     linkstatic = 1,
     alwayslink = 1,
@@ -223,6 +231,7 @@ cc_library(
         "//absl:llvm_compiler": ["-DLEAK_SANITIZER"],
         "//conditions:default": [],
     }),
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     visibility = ["//visibility:private"],
 )
@@ -233,6 +242,7 @@ cc_library(
     srcs = ["leak_check.cc"],
     hdrs = ["leak_check.h"],
     copts = ["-ULEAK_SANITIZER"],
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     visibility = ["//visibility:private"],
 )
@@ -289,6 +299,7 @@ cc_library(
     srcs = ["internal/stack_consumption.cc"],
     hdrs = ["internal/stack_consumption.h"],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     visibility = ["//visibility:private"],
     deps = [
diff --git a/absl/flags/BUILD.bazel b/absl/flags/BUILD.bazel
index bb1a7aa..bed2e84 100644
--- a/absl/flags/BUILD.bazel
+++ b/absl/flags/BUILD.bazel
@@ -35,6 +35,7 @@ cc_library(
         "internal/program_name.h",
     ],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     visibility = [
         "//absl/flags:__pkg__",
@@ -55,6 +56,7 @@ cc_library(
         "usage_config.h",
     ],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         ":internal",
@@ -73,6 +75,7 @@ cc_library(
         "marshalling.h",
     ],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         "//absl/base:core_headers",
@@ -90,6 +93,7 @@ cc_library(
         "internal/commandlineflag.h",
     ],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     visibility = [
         "//absl/flags:__pkg__",
@@ -116,6 +120,7 @@ cc_library(
         "internal/type_erased.h",
     ],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     visibility = [
         "//absl/flags:__pkg__",
@@ -142,6 +147,7 @@ cc_library(
         "internal/flag.h",
     ],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         ":config",
@@ -163,6 +169,7 @@ cc_library(
         "internal/usage.h",
     ],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     visibility = [
         "//absl/flags:__pkg__",
@@ -185,6 +192,7 @@ cc_library(
         "parse.h",
     ],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         ":config",
diff --git a/absl/hash/BUILD.bazel b/absl/hash/BUILD.bazel
index 8c2daf7..dabd003 100644
--- a/absl/hash/BUILD.bazel
+++ b/absl/hash/BUILD.bazel
@@ -33,6 +33,7 @@ cc_library(
     ],
     hdrs = ["hash.h"],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         ":city",
@@ -52,6 +53,7 @@ cc_library(
     name = "hash_testing",
     testonly = 1,
     hdrs = ["hash_testing.h"],
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         ":spy_hash_state",
@@ -84,6 +86,7 @@ cc_library(
     testonly = 1,
     hdrs = ["internal/spy_hash_state.h"],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     visibility = ["//visibility:private"],
     deps = [
@@ -100,6 +103,7 @@ cc_library(
         "internal/city.h",
     ],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         "//absl/base:config",
diff --git a/absl/memory/BUILD.bazel b/absl/memory/BUILD.bazel
index f815ef9..8466f60 100644
--- a/absl/memory/BUILD.bazel
+++ b/absl/memory/BUILD.bazel
@@ -18,9 +18,9 @@ load(
     "//absl:copts/configure_copts.bzl",
     "ABSL_DEFAULT_COPTS",
     "ABSL_DEFAULT_LINKOPTS",
-    "ABSL_TEST_COPTS",
     "ABSL_EXCEPTIONS_FLAG",
     "ABSL_EXCEPTIONS_FLAG_LINKOPTS",
+    "ABSL_TEST_COPTS",
 )
 
 package(default_visibility = ["//visibility:public"])
@@ -31,6 +31,7 @@ cc_library(
     name = "memory",
     hdrs = ["memory.h"],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         "//absl/base:core_headers",
diff --git a/absl/meta/BUILD.bazel b/absl/meta/BUILD.bazel
index e004b50..c7a97f8 100644
--- a/absl/meta/BUILD.bazel
+++ b/absl/meta/BUILD.bazel
@@ -13,6 +13,7 @@ cc_library(
     name = "type_traits",
     hdrs = ["type_traits.h"],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         "//absl/base:config",
diff --git a/absl/numeric/BUILD.bazel b/absl/numeric/BUILD.bazel
index d9b561d..7dac17f 100644
--- a/absl/numeric/BUILD.bazel
+++ b/absl/numeric/BUILD.bazel
@@ -32,6 +32,7 @@ cc_library(
     ],
     hdrs = ["int128.h"],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         "//absl/base:config",
diff --git a/absl/strings/BUILD.bazel b/absl/strings/BUILD.bazel
index d6ce88d..834279e 100644
--- a/absl/strings/BUILD.bazel
+++ b/absl/strings/BUILD.bazel
@@ -66,6 +66,7 @@ cc_library(
         "substitute.h",
     ],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     deps = [
         ":internal",
         "//absl/base",
@@ -93,6 +94,7 @@ cc_library(
         "internal/utf8.h",
     ],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     deps = [
         "//absl/base:core_headers",
         "//absl/base:endian",
@@ -529,6 +531,7 @@ cc_library(
         "str_format.h",
     ],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     deps = [
         ":str_format_internal",
     ],
@@ -554,6 +557,7 @@ cc_library(
         "internal/str_format/parser.h",
     ],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     visibility = ["//visibility:private"],
     deps = [
         ":strings",
@@ -667,6 +671,7 @@ cc_library(
     testonly = True,
     srcs = ["internal/pow10_helper.cc"],
     hdrs = ["internal/pow10_helper.h"],
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     visibility = ["//visibility:private"],
 )
 
diff --git a/absl/synchronization/BUILD.bazel b/absl/synchronization/BUILD.bazel
index 67da9d4..4aca0ec 100644
--- a/absl/synchronization/BUILD.bazel
+++ b/absl/synchronization/BUILD.bazel
@@ -35,6 +35,7 @@ cc_library(
         "internal/graphcycles.h",
     ],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     visibility = [
         "//absl:__subpackages__",
@@ -71,6 +72,7 @@ cc_library(
         "notification.h",
     ],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = select({
         "//absl:windows": [],
         "//conditions:default": ["-pthread"],
@@ -148,6 +150,7 @@ cc_library(
     name = "thread_pool",
     testonly = 1,
     hdrs = ["internal/thread_pool.h"],
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     visibility = [
         "//absl:__subpackages__",
@@ -181,6 +184,7 @@ cc_library(
     testonly = 1,
     srcs = ["mutex_benchmark.cc"],
     copts = ABSL_TEST_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     visibility = [
         "//absl/synchronization:__pkg__",
@@ -223,6 +227,7 @@ cc_library(
     testonly = 1,
     srcs = ["internal/per_thread_sem_test.cc"],
     copts = ABSL_TEST_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         ":synchronization",
diff --git a/absl/time/BUILD.bazel b/absl/time/BUILD.bazel
index 55e83a8..a51da1a 100644
--- a/absl/time/BUILD.bazel
+++ b/absl/time/BUILD.bazel
@@ -42,6 +42,7 @@ cc_library(
         "time.h",
     ],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         "//absl/base",
@@ -62,6 +63,7 @@ cc_library(
     ],
     hdrs = ["internal/test_util.h"],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     visibility = [
         "//absl/time:__pkg__",
diff --git a/absl/time/internal/cctz/BUILD.bazel b/absl/time/internal/cctz/BUILD.bazel
index b05c234..ea73f7c 100644
--- a/absl/time/internal/cctz/BUILD.bazel
+++ b/absl/time/internal/cctz/BUILD.bazel
@@ -34,6 +34,7 @@ config_setting(
 
 cc_library(
     name = "includes",
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     textual_hdrs = [
         "include/cctz/civil_time.h",
         "include/cctz/civil_time_detail.h",
@@ -48,6 +49,7 @@ cc_library(
     hdrs = [
         "include/cctz/civil_time.h",
     ],
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     textual_hdrs = ["include/cctz/civil_time_detail.h"],
     visibility = ["//visibility:public"],
 )
@@ -76,6 +78,7 @@ cc_library(
         "include/cctz/time_zone.h",
         "include/cctz/zone_info_source.h",
     ],
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = select({
         ":osx": [
             "-framework Foundation",
diff --git a/absl/types/BUILD.bazel b/absl/types/BUILD.bazel
index 66ecb04..bd8ac3a 100644
--- a/absl/types/BUILD.bazel
+++ b/absl/types/BUILD.bazel
@@ -31,6 +31,7 @@ cc_library(
     name = "any",
     hdrs = ["any.h"],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         ":bad_any_cast",
@@ -45,6 +46,7 @@ cc_library(
     name = "bad_any_cast",
     hdrs = ["bad_any_cast.h"],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         ":bad_any_cast_impl",
@@ -59,6 +61,7 @@ cc_library(
         "bad_any_cast.h",
     ],
     copts = ABSL_EXCEPTIONS_FLAG + ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_EXCEPTIONS_FLAG_LINKOPTS + ABSL_DEFAULT_LINKOPTS,
     visibility = ["//visibility:private"],
     deps = [
@@ -124,6 +127,7 @@ cc_library(
         "span.h",
     ],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         "//absl/algorithm",
@@ -176,6 +180,7 @@ cc_library(
     srcs = ["internal/optional.h"],
     hdrs = ["optional.h"],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         ":bad_optional_access",
@@ -193,6 +198,7 @@ cc_library(
     srcs = ["bad_optional_access.cc"],
     hdrs = ["bad_optional_access.h"],
     copts = ABSL_DEFAULT_COPTS + ABSL_EXCEPTIONS_FLAG,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_EXCEPTIONS_FLAG_LINKOPTS + ABSL_DEFAULT_LINKOPTS,
     deps = [
         "//absl/base",
@@ -205,6 +211,7 @@ cc_library(
     srcs = ["bad_variant_access.cc"],
     hdrs = ["bad_variant_access.h"],
     copts = ABSL_EXCEPTIONS_FLAG + ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_EXCEPTIONS_FLAG_LINKOPTS + ABSL_DEFAULT_LINKOPTS,
     deps = [
         "//absl/base",
@@ -249,6 +256,7 @@ cc_library(
     srcs = ["internal/variant.h"],
     hdrs = ["variant.h"],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         ":bad_variant_access",
@@ -313,6 +321,7 @@ cc_library(
     name = "compare",
     hdrs = ["compare.h"],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     deps = [
         "//absl/base:core_headers",
         "//absl/meta:type_traits",
diff --git a/absl/utility/BUILD.bazel b/absl/utility/BUILD.bazel
index d41317e..bd157bd 100644
--- a/absl/utility/BUILD.bazel
+++ b/absl/utility/BUILD.bazel
@@ -13,6 +13,7 @@ cc_library(
     name = "utility",
     hdrs = ["utility.h"],
     copts = ABSL_DEFAULT_COPTS,
+    linked_statically_by = ["@bazel_shared_lib_example//lib:name_utils_dynamic_lib"],
     linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         "//absl/base:base_internal",
